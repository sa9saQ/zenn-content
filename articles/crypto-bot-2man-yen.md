---
title: "元手2万円で仮想通貨自動売買Botを作った全記録"
emoji: "🤖"
type: "tech"
topics: ["crypto", "typescript", "ai", "自動売買", "bot"]
published: false
---

## はじめに

「仮想通貨の自動売買Bot」って聞くと、何百万の元手とか、金融工学の知識とか必要そうじゃないですか。

僕は工場でケーブル作ってる普通の会社員です。プログラミングの知識はほぼゼロ。

でもAIエージェント（自律型AI）と一緒に、**元手2万円**で仮想通貨の自動売買Botを作って、今も実際に動かしてます。

この記事では、なんで作ったのか、どうやって作ったのか、実際どうなったのか、全部正直に書きます。

:::message
⚠️ **投資は自己責任です。** この記事は実体験の記録であり、投資助言ではありません。過去の成績は将来の成果を保証しません。
:::

## 何を作ったのか

ざっくり言うと、こんなBotです。

| 項目 | 内容 |
|------|------|
| 元手 | 約2万円（$133くらい） |
| 対象 | BTC / ETH / SOL（現物だけ） |
| 取引所 | Bitget |
| 実行間隔 | 15分ごと |
| 言語 | TypeScript |
| 頭脳 | DeepSeek V3 + Grok 3（2つのAIに同時に聞く） |
| 実行基盤 | Ubuntu自宅PC + OpenClaw |

**レバレッジは一切なし。** 現物オンリー。これは最初から絶対のルール。

## なんで作ったの？

正直に言います。**お金が欲しかった**から。

工場の給料だけだと厳しくて。でも投資の知識はない。FXとかレバレッジは怖すぎる。

「じゃあAIに判断させて、現物だけ、少額で、ちゃんとリスク管理したらどうなるんだろう？」

…という実験です。うまくいくかどうかはわからなかった。

## しくみ

```
OpenClaw（15分ごとに自動実行）
    ↓
auto-trader.ts
    ├── Bitget APIで現在価格を取得
    ├── テクニカル指標を計算（RSI、移動平均、ボリンジャーバンド）
    ├── Fear & Greed Index を取得
    ├── 2つのAIに「買い？売り？」を聞く
    ├── 両方の意見が一致 → 売買実行
    └── 結果をTelegramに通知
```

### 2つのAIに聞く（マルチAI合議制）

ここがミソ。1つのAIだけに任せるのは怖いんですよね。

だから**DeepSeekとGrokの2つに同時に聞いて、両方が同じ判断をした時だけ売買する**ようにしました。

```typescript
const [deepseekResult, grokResult] = await Promise.all([
  analyzeWithDeepSeek(marketData),
  analyzeWithGrok(marketData)
]);

// 両方「買い」なら買う。片方でも違えば何もしない
if (deepseekResult.action === grokResult.action) {
  await executeTrade(deepseekResult.action);
}
```

片方が「買い」で片方が「売り」？→ 何もしない。**慎重すぎるくらいでちょうどいい。**

## テクニカル指標

ライブラリは使わず、全部自前で計算してます。

### RSI（相対力指数）

「売られすぎ」「買われすぎ」を数値化するやつ。[Investopedia](https://www.investopedia.com/terms/r/rsi.asp)によると、RSIの標準期間は14日。

```typescript
function calculateRSI(prices: number[], period: number = 14): number {
  const changes = prices.slice(1).map((p, i) => p - prices[i]);
  const gains = changes.map(c => c > 0 ? c : 0);
  const losses = changes.map(c => c < 0 ? Math.abs(c) : 0);
  
  const avgGain = gains.slice(-period).reduce((a, b) => a + b, 0) / period;
  const avgLoss = losses.slice(-period).reduce((a, b) => a + b, 0) / period;
  
  if (avgLoss === 0) return 100;
  return 100 - (100 / (1 + avgGain / avgLoss));
}
```

:::message
これはSMA（単純平均）方式の簡易実装です。Wilderの原著ではEMA（指数平均）方式を推奨してます。精度を上げたい人はEMA版に置き換えてください。
:::

- **RSI < 30** → 売られすぎ → 買いのチャンスかも
- **RSI > 70** → 買われすぎ → 売りのチャンスかも

### ボリンジャーバンド

[ジョン・ボリンジャー本人のサイト](https://www.bollingerbands.com/bollinger-band-rules)によると、デフォルトは**20期間の移動平均 ± 2標準偏差**。

```typescript
function calculateBollingerBands(prices: number[], period: number = 20) {
  const sma = prices.slice(-period).reduce((a, b) => a + b, 0) / period;
  const variance = prices.slice(-period)
    .reduce((sum, p) => sum + Math.pow(p - sma, 2), 0) / period;
  const stdDev = Math.sqrt(variance);
  
  return {
    upper: sma + stdDev * 2,  // 上限バンド
    middle: sma,               // 中央線
    lower: sma - stdDev * 2    // 下限バンド
  };
}
```

## リスク管理（ここが一番大事）

元手2万円を溶かしたら終わり。だからリスク管理はガチガチにしてます。

### 7つの安全装置

| # | 名前 | 内容 |
|---|------|------|
| 1 | ストップロス | エントリーから-10%で強制売却 |
| 2 | トレーリングストップ | 最高値から-5%で利確 |
| 3 | 利確ライン | +20%で半分売却 |
| 4 | ブラックスワン検知 | 24時間で15%以上動いたら緊急売却 |
| 5 | 同時実行ロック | 二重実行を防止 |
| 6 | マルチAI合議 | 2つのAIが一致しないと動かない |
| 7 | 現物のみ | レバレッジ絶対禁止 |

**なんで現物だけ？** → 元手2万円でレバレッジかけたら、一瞬で全部消える可能性がある。現物なら最悪でも「持ち続ける」ことができる。これだけは譲れない。

## 実際の成績

2週間動かした結果がこれ。

| 指標 | 値 |
|------|-----|
| 総トレード数 | 26回（うち決済15回） |
| 勝率 | 86.7%（13勝2敗） |
| 平均損益 | +5.31% |
| 最大利益 | +12.3%（1トレード） |
| 最大損失 | -4.8%（1トレード） |

**勝率86.7%。** …正直、出来すぎだと思ってます。

まだ26回しかトレードしてないので、統計的に有意かって言われると微妙。100回超えたらもっと信頼できる数字になるはず。

負けた2回はどっちもトレーリングストップが発動したケース。[Fear & Greed Index](https://alternative.me/crypto/fear-and-greed-index/)が9（Extreme Fear）の日で、市場全体が急落してた。でもストップのおかげで大怪我はしなかった。

## ハマったところ

### Bitget APIの部分約定

「0.001 BTC買い」って注文出しても、0.0008しか約定しないことがある。最初これに気づかなくて、「買ったはずなのにポジションがない」ってバグに2日悩まされた。

→ **対策**: 約定後に必ず`getOrderFill()`で実際の約定量を確認するようにした。

### 環境変数のダブルクォート

`.env`ファイルに`API_KEY="abc123"`って書くと、値にダブルクォートが含まれちゃう。これでAPI認証が通らなくて2時間溶かした。地味にハマる。

### Extreme Fear時の判断

Fear & Greed Indexが一桁の時は、テクニカル的に「買い時」でも実際は底なし沼。**恐怖指数が極端に低い時は何もしないのが正解**って学んだ。

## バグの話

開発中に見つけたバグ、**合計36件**。

6回のコードレビュー + 別のAI（Claude）による独立レビュー1回で、地道に潰していった。

多かったのは：
- 部分約定の処理漏れ（7件）
- 型安全性の問題（5件）
- レースコンディション（3件）

36件って多いけど、お金を扱うプログラムだから「見つけられてよかった」って思ってる。

## コスト

| 項目 | 月額 |
|------|------|
| DeepSeek API | 数十円（従量課金だけどめちゃ安い） |
| Grok API | 無料枠内 |
| Bitget取引手数料 | [0.1%/取引](https://www.bitget.com/support/articles/12560603820584)（月50円くらい） |
| サーバー（自宅PC） | ¥0（もともとあるPC） |
| **合計** | **月100円くらい** |

月100円で24時間動く自動売買Bot。

## これから

- **データをもっと貯める。** 26回じゃまだ足りない。100回超えたら本格的な分析ができる
- **自動学習機能。** 過去のパターンからAI自身が学んでいく仕組みを入れたい
- **コイン追加。** 資金が$500を超えたら、対象コインを増やす予定

## まとめ

- 元手2万円、プログラミング知識ゼロでも自動売買Botは作れた
- 大事なのは「勝率」じゃなくて「負けた時に死なない」リスク管理
- AIに判断を任せるなら、1つじゃなくて複数に聞くのが安心
- まだ実験段階。過信は禁物

質問あったらコメントで気軽にどうぞ。

---

*この記事はすべて実体験に基づいています。数字はBitgetの実際の取引履歴から取得したものです。*
